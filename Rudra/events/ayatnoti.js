const moment = require("moment-timezone");

module.exports.config = {
  name: "quranayah",
  version: "1.0.0",
  credits: "Kashif Raza",
  description: "Daily random Quranic ayah with Urdu translation"
};

module.exports.run = async function ({ api }) {
  const allAyat = [
    {
      arabic: "Ø¥ÙÙ†Ù‘ÙŽ Ù…ÙŽØ¹ÙŽ Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§",
      urdu: "Ø¨Û’ Ø´Ú© ÛØ± ØªÙ†Ú¯ÛŒ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¢Ø³Ø§Ù†ÛŒ ÛÛ’Û”",
      reference: "Ø³ÙˆØ±Û Ø§Ù„Ø´Ø±Ø­ - 6"
    },
    {
      arabic: "Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù Ù†ÙÙˆØ±Ù Ø§Ù„Ø³Ù‘ÙŽÙ…ÙŽØ§ÙˆÙŽØ§ØªÙ ÙˆÙŽØ§Ù„Ù’Ø£ÙŽØ±Ù’Ø¶Ù",
      urdu: "Ø§Ù„Ù„Û Ø¢Ø³Ù…Ø§Ù†ÙˆÚº Ø§ÙˆØ± Ø²Ù…ÛŒÙ† Ú©Ø§ Ù†ÙˆØ± ÛÛ’Û”",
      reference: "Ø³ÙˆØ±Û Ù†ÙˆØ± - 35"
    },
    {
      arabic: "ÙˆÙŽÙ…ÙŽØ§ ØªÙŽÙˆÙ’ÙÙÙŠÙ‚ÙÙŠ Ø¥ÙÙ„Ù‘ÙŽØ§ Ø¨ÙØ§Ù„Ù„Ù‘ÙŽÙ‡Ù",
      urdu: "Ø§ÙˆØ± Ù…ÛŒØ±ÛŒ Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ ØµØ±Ù Ø§Ù„Ù„Û Ú©ÛŒ Ù…Ø¯Ø¯ Ø³Û’ ÛÛ’Û”",
      reference: "Ø³ÙˆØ±Û ÛÙˆØ¯ - 88"
    },
    {
      arabic: "ÙÙŽØ¥ÙÙ†Ù‘ÙŽ Ù…ÙŽØ¹ÙŽ Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§",
      urdu: "ØªÙˆ Ø¨Û’ Ø´Ú© ØªÙ†Ú¯ÛŒ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¢Ø³Ø§Ù†ÛŒ ÛÛ’Û”",
      reference: "Ø³ÙˆØ±Û Ø§Ù„Ø´Ø±Ø­ - 5"
    },
    {
      arabic: "Ø¥ÙÙ†Ù‘ÙŽ Ø§Ù„Ù„Ù‘ÙŽÙ‡ÙŽ Ù…ÙŽØ¹ÙŽ Ø§Ù„ØµÙ‘ÙŽØ§Ø¨ÙØ±ÙÙŠÙ†ÙŽ",
      urdu: "Ø¨Û’ Ø´Ú© Ø§Ù„Ù„Û ØµØ¨Ø± Ú©Ø±Ù†Û’ ÙˆØ§Ù„ÙˆÚº Ú©Û’ Ø³Ø§ØªÚ¾ ÛÛ’Û”",
      reference: "Ø³ÙˆØ±Û Ø§Ù„Ø¨Ù‚Ø±Û - 153"
    },
    {
      arabic: "Ø¥ÙÙ†Ù‘ÙŽ Ø§Ù„Ù„Ù‘ÙŽÙ‡ÙŽ ØºÙŽÙÙÙˆØ±ÙŒ Ø±Ù‘ÙŽØ­ÙÙŠÙ…ÙŒ",
      urdu: "Ø¨Û’ Ø´Ú© Ø§Ù„Ù„Û Ø¨Ø®Ø´Ù†Û’ ÙˆØ§Ù„Ø§ Ù…ÛØ±Ø¨Ø§Ù† ÛÛ’Û”",
      reference: "Ø³ÙˆØ±Û Ø§Ù„Ø¨Ù‚Ø±Û - 173"
    },
    {
      arabic: "ÙˆÙŽÙ‚ÙÙ„ Ø±ÙŽÙ‘Ø¨ÙÙ‘ Ø²ÙØ¯Ù’Ù†ÙÙŠ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§",
      urdu: "Ø§ÙˆØ± Ú©ÛÛ Ø¯ÛŒØ¬ÛŒÛ’: Ø§Û’ Ù…ÛŒØ±Û’ Ø±Ø¨! Ù…ÛŒØ±Û’ Ø¹Ù„Ù… Ù…ÛŒÚº Ø§Ø¶Ø§ÙÛ ÙØ±Ù…Ø§Û”",
      reference: "Ø³ÙˆØ±Û Ø·Ù‡ - 114"
    },
    {
      arabic: "Ù„ÙŽØ§ ØªÙŽÙ‚Ù’Ù†ÙŽØ·ÙÙˆØ§ Ù…ÙÙ† Ø±Ù‘ÙŽØ­Ù’Ù…ÙŽØ©Ù Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù",
      urdu: "Ø§Ù„Ù„Û Ú©ÛŒ Ø±Ø­Ù…Øª Ø³Û’ Ù…Ø§ÛŒÙˆØ³ Ù†Û ÛÙˆÛ”",
      reference: "Ø³ÙˆØ±Û Ø§Ù„Ø²Ù…Ø± - 53"
    },
    {
      arabic: "Ø¥ÙÙ†Ù‘ÙŽ Ø§Ù„Ù„Ù‘ÙŽÙ‡ÙŽ ÙŠÙØ­ÙØ¨Ù‘Ù Ø§Ù„Ù’Ù…ÙØªÙŽÙˆÙŽÙƒÙ‘ÙÙ„ÙÙŠÙ†ÙŽ",
      urdu: "Ø¨Û’ Ø´Ú© Ø§Ù„Ù„Û ØªÙˆÚ©Ù„ Ú©Ø±Ù†Û’ ÙˆØ§Ù„ÙˆÚº Ø³Û’ Ù…Ø­Ø¨Øª Ú©Ø±ØªØ§ ÛÛ’Û”",
      reference: "Ø³ÙˆØ±Û Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù† - 159"
    },
    {
      arabic: "ÙÙŽØ§Ø°Ù’ÙƒÙØ±ÙÙˆÙ†ÙÙŠ Ø£ÙŽØ°Ù’ÙƒÙØ±Ù’ÙƒÙÙ…Ù’",
      urdu: "Ù¾Ø³ ØªÙ… Ù…ÛŒØ±Ø§ Ø°Ú©Ø± Ú©Ø±ÙˆØŒ Ù…ÛŒÚº ØªÙ…ÛØ§Ø±Ø§ Ø°Ú©Ø± Ú©Ø±ÙˆÚº Ú¯Ø§Û”",
      reference: "Ø³ÙˆØ±Û Ø§Ù„Ø¨Ù‚Ø±Û - 152"
    }
  ];

  const currentHour = moment().tz("Asia/Karachi").hour();
  const isMorning = currentHour >= 5 && currentHour < 10;

  if (!isMorning) return;

  const randomAyah = allAyat[Math.floor(Math.random() * allAyat.length)];

  const message = `ðŸ“– *Ù‚Ø±Ø¢Ù†ÛŒ Ø¢ÛŒØª Ø¨Ø±Ø§Ø¦Û’ Ø¢Ø¬* ðŸ“–\n\nðŸ•‹ *${randomAyah.arabic}*\n\nðŸ“ ${randomAyah.urdu}\nðŸ“š ${randomAyah.reference}`;

  const threads = await api.getThreadList(100, null, ["INBOX"]);
  for (const thread of threads) {
    api.sendMessage(message, thread.threadID);
  }
};
